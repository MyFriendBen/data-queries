[sqlfluff]
# dialect = ansi works for both Postgres and BigQuery at the formatting level
dialect = ansi
templater = jinja
max_line_length = 120
large_file_skip_byte_limit = 0
processes = -1

# Skip sections that can't be parsed (BigQuery UNNEST, MATERIALIZED VIEW, etc.)
# This allows the rest of the file to still be formatted correctly
ignore = parsing

# Only format layout/style â€” disable semantic rules that require DB context
exclude_rules = AM04, AL01, AL05, RF01, RF02, RF03, RF04, RF05, CP02, ST06

[sqlfluff:templater:jinja]
# Provides ref(), source(), config(), var() etc. automatically
apply_dbt_builtins = True

[sqlfluff:rules:layout.indent]
indent_unit = space
tab_space_size = 4

[sqlfluff:rules:capitalisation.keywords]
# SQL keywords must be uppercase e.g. SELECT, FROM, WHERE
capitalisation_policy = upper

[sqlfluff:rules:capitalisation.identifiers]
# Table and column names must be lowercase
capitalisation_policy = lower
